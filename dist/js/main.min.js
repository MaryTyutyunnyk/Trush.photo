$(function () {
	$("#arrow").on("click", function () {
		$(".infoSectionDescription").toggleClass('openDescription');
		$(".infoSectionDescription__arrow").toggleClass('arrowUp')
	});
});


$(function () {
	$("#homePageSliderList").owlCarousel({
		items: 1,
		loop: true,
		autoplay: true,
		autoplayTimeout: 3000,
		autoplayHoverPause: true,
		animateOut: 'slideOutUp',
		animateIn: 'slideInUp',
		mouseDrag: false,
		touchDrag: false,
		pullDrag: false,
		freeDrag: false,
	});
});

$(function () {

// Эту функцию надо как-то связать с переключением языков на сайте.
// function translateValidationMessages(currentLang) {
// 	message = {
// 		en: {
// 			required: 'Required field',
// 			minlength: $.validator.format('Please enter at least {0} characters'),
// 			customPhone: 'Please enter correct phone',
// 		},
// 		uk: {
// 			required: 'Поле обов\'язкове для заповнення',
// 			minlength: $.validator.format('Будь ласка, введіть не менше {0} символів'),
// 			customPhone: 'Будь ласка, введіть коректний номер телефону',
// 		},
// 		ru: {
// 			required: 'Поле обязательно для заполнения',
// 			minlength: $.validator.format('Пожалуйста, введите не менее {0} символов'),
// 			customPhone: 'Пожалуйста, введите корректный номер телефона',
// 		}
// 	};
// 	console.log('Translating validation messages to: ' + currentLang);
//
// 	if (currentLang == 'uk') {
// 		$.extend($.validator.messages, message.uk);
// 	} else if (currentLang == 'ru') {
// 		$.extend($.validator.messages, message.ru);
// 	} else {
// 		$.extend($.validator.messages, message.en);
// 	}
// }

	$.validator.setDefaults({
		submitHandler: function () {
			$('.brief__box')
				.css({'display': 'none'});
			$('.briefSent')
				.css({'display': 'block'});
		},
		highlight: function (element) {
			$(element)
				.closest('.briefForm__input')
				.addClass('errorBorder');
		},
		unhighlight: function (element) {
			$(element)
				.closest('.briefForm__input')
				.removeClass('errorBorder');
		}
	});

	$.validator.addMethod("customEmail", function (value, element) {
		return this.optional(element) || /^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(value);
	}, 'Пожалуйста, введите корректный адрес электронной почты');

	$.validator.addMethod("customPhone", function (value, element) {
		console.log(value);
		value = value.replace(/\s+/g, "");
		return this.optional(element) || /^(?!\+.*\(.*\).*\-\-.*$)(?!\+.*\(.*\).*\-$)(([0-9]{0,11})?( [0-9]{3})?( [0-9]{3})?( [0-9]{2})?( [0-9]{2})?(\([0-9]{3})?(\)[0-9]{3})?([-]{0,1})?([0-9]{0,2})?([-]{0,1})?([0-9]{0,2})?( [0-9]{2})?( [0-9]{2})?(\+[0-9]{1,11})?( [0-9]{3})?( [0-9]{3})?( [0-9]{2})?( [0-9]{2})?(\([0-9]{3})?(\)[0-9]{3})?([-]{0,1})?([0-9]{0,2})?([-]{0,1})?([0-9]{0,2})?( [0-9]{2})?( [0-9]{2})?)$/gim.test(value);
	}, 'Пожалуйста, введите корректный номер телефона');

	$('#briefForm').validate({
		rules: {
			name: {
				required: true,
				minlength: 2,
			},
			phone: {
				required: true,
				customPhone: true,
				minlength: 10,
			},
			email: {
				required: true,
				email: true,
				customEmail: true,
			},
			product: {
				required: true,
			}
		},
		messages: {
			name: {
				required: 'Поле обязательно для заполнения',
				minlength: $.validator.format('Пожалуйста, введите не менее {0} символов'),
			},
			phone: {
				required: 'Поле обязательно для заполнения',
				customPhone: 'Пожалуйста, введите корректный номер телефона',
				minlength: $.validator.format('Пожалуйста, введите не менее {0} символов'),
			},
			email: {
				required: 'Поле обязательно для заполнения',
				email: 'Пожалуйста, введите корректный адрес электронной почты',
				customEmail: 'Пожалуйста, введите корректный адрес электронной почты'
			},
			product: {
				required: 'Поле обязательно для заполнения',
			}
		},
		errorClass: 'errorMessage',
	});
});

$(function () {
	// Function for brief pop-up

	$(".navbarMenu__btn").on('click', function () {
		$(".brief").css({"display": "block"});
	});

	$(".brief__crossButton").on('click', function () {
		$(".brief").css({"display": "none"});
	});
});
$(function () {

	let $grid = $('.interior__masonry').imagesLoaded(function () {
		// init Masonry after all images have loaded
		$grid.masonry({
			// options
			itemSelector: '.interior__item',
			columnWidth: '.grid-sizer',
			gutter: '.gutter-sizer ',
			percentPosition: true,
			horizontalOrder: true,
			isResizeBound: true
		});
	});

	let interiorButton = $(".interior__btn");
	let bubblesAnimation = $(".interior__bubbles");

	interiorButton.click(function () {
		bubblesAnimation.css("display", "flex"); // animation showing
		setTimeout(function () {
			bubblesAnimation.fadeOut(300); // animation hiding after 2s and with the delay - 300ms
		}, 2000);
	});
});
$(function () {
	let $gridGallery = $('.interiorGallery__masonry').imagesLoaded(function () {
		// init Masonry after all images have loaded
		$gridGallery.masonry({
			// options
			itemSelector: '.interiorGallery__item',
			columnWidth: '.grid-sizer',
			gutter: '.gutter-sizer ',
			percentPosition: true,
			horizontalOrder: true
		});
	});
});
$(function () {

	$('#navbarBurger').click(function (e) {
		e.stopPropagation();
		$(this).toggleClass('open');
		$('.navbarMenu').toggleClass('navbarMenu_open');
	});


	let navbarNavLink = $(".navbarNav__link");
	navbarNavLink.click(function () {
		$(".navbarNav__link.navbarNav__link_active").removeClass("navbarNav__link_active");
		$(this).addClass("navbarNav__link_active");
	});


	let navbarLanguageLink = $(".navbarLanguage__link");
	navbarLanguageLink.click(function () {
		$(".navbarLanguage__link.navbarLanguage__link_active").removeClass("navbarLanguage__link_active");
		$(this).addClass("navbarLanguage__link_active");
	});
});


// $("#lang").change(function() {
//     translateValidationMessages(this.value);
//     console.log("Setting language to " + this.value);
// });
$(function () {

// Function for portfolio submenu demonstration

	$('#portfolioItem').click(function (event) {
		event.stopPropagation();
		$('.navbarNavSubMenu').toggleClass('open');
		$(".navbarNav__arrow").toggleClass('arrowUp');
		$('.navbarLanguageDesktopSubMenu').removeClass("open");
	});

	$('html').click(function () {
		$('.navbarNavSubMenu').removeClass("open");
		$(".navbarNav__arrow").removeClass('arrowUp');
	});


// Function for language submenu demonstration

	$('#navbarLanguageDesktopLink').click(function (event) {
		event.stopPropagation();
		$('.navbarLanguageDesktopSubMenu').toggleClass('open');
		$(".navbarLanguageDesktop__arrow").toggleClass('upArrow');
		$('.navbarNavSubMenu').removeClass("open");
	});

	$('html').click(function () {
		$('.navbarLanguageDesktopSubMenu').removeClass("open");
		$(".navbarLanguageDesktop__arrow").removeClass('upArrow');
	});
});



$(function () {

// portfolioBlockImage carousel initiation
	let carouselListImageInitiated = false;
	const prevArrow = $('#previous_arrow');
	const nextArrow = $('#next_arrow');
	const owlCarouselListImage = $('#carouselListImage');
	const $window = $(window);

	const initCarouselListImage = () => {
		owlCarouselListImage.owlCarousel({
			autoWidth: true,
			loop: true,
			dots: false,
			responsiveClass: true,
			responsive: {
				0: {
					loop: false,
				},
				960: {
					loop: true,
				},
			}
		});
		prevArrow.click(function () {
			owlCarouselListImage.trigger('prev.owl.carousel');
		});
		nextArrow.click(function () {
			owlCarouselListImage.trigger('next.owl.carousel');
		});
		owlCarouselListImage.on('changed.owl.carousel', function (event) {
			const {item: {count, index}} = event;
			if (index === 0) {
				prevArrow.hide();
			} else {
				prevArrow.show();
			}
		});
		carouselListImageInitiated = true;
	};
	initCarouselListImage();

// Remove portfolioBlockImage carousel on mobile devices

	$window.resize(function () {
		if ($window.width() < 960) {
			if (carouselListImageInitiated) {
				owlCarouselListImage.trigger('destroy.owl.carousel');
				carouselListImageInitiated = false;
			}
		} else {
			if (!carouselListImageInitiated) {
				initCarouselListImage();
			}
		}
	});


// portfolioBlockCatalogue carousel initiation
	let carouselListCatalogueInitiated = false;
	const prevArrow2 = $('#left_arrow');
	const nextArrow2 = $('#right_arrow');
	const owlCarouselListCatalogue = $('#carouselListCatalogue');

	const initCarouselListCatalogue = () => {
		owlCarouselListCatalogue.owlCarousel({
			autoWidth: true,
			loop: true,
			dots: false,
			responsiveClass: true,
			responsive: {
				0: {
					loop: false,
				},
				960: {
					loop: true,
				},
			}
		});
		prevArrow2.click(function () {
			owlCarouselListCatalogue.trigger('prev.owl.carousel');
		});
		nextArrow2.click(function () {
			owlCarouselListCatalogue.trigger('next.owl.carousel');
		});
		owlCarouselListCatalogue.on('changed.owl.carousel', function (event) {
			const {item: {count, index}} = event;
			if (index === 0) {
				prevArrow2.hide();
			} else {
				prevArrow2.show();
			}
		});
		carouselListCatalogueInitiated = true;
	};
	initCarouselListCatalogue();

// Remove PortfolioBlockCatalogue on mobile devices

	$window.resize(function () {
		if ($window.width() < 960) {
			if (carouselListCatalogueInitiated) {
				owlCarouselListCatalogue.trigger('destroy.owl.carousel');
				carouselListCatalogueInitiated = false;
			}
		} else {
			if (!carouselListCatalogueInitiated) {
				initCarouselListCatalogue();
			}
		}
	});


// Function for modal window

	const addListeners = element => {
		element.on('click', function () {
			$(".modal").css({"display": "block"});
			$.ajax({
				type: "GET",
				url: "http://photo.apolokhov.in.ua/getimagemigx?resid=data.id",
				data: {
					id: $(this).id
				},
				error: function (data, textStatus) {

				},
				success: function (data, textStatus) {

				},
				complete: function () {

				}
			});
		});
	};
	const imgBox = $(".carouselItem__imgBox");
	addListeners(imgBox);


	$(".modal__crossBlock").on('click', function () {
		$(".modal").css({"display": "none"});
	});


// Function for modalCarousel

	const modalArrowPrevious = $('#modalArrowPrevious');
	const modalArrowNext = $('#modalArrowNext');
	const owlModalCarousel = $('#modalCarouselList');
	owlModalCarousel.owlCarousel({
		items: 1,
		loop: true,
		dots: false,
		mouseDrag: false,
		touchDrag: false,
		pullDrag: false,
		freeDrag: false,
		responsiveClass: true,
		responsive: {
			0: {
				touchDrag: true,
			},
			960: {
				touchDrag: false,
			},
		}
	});
	modalArrowPrevious.click(function () {
		owlModalCarousel.trigger('prev.owl.carousel');
	});
	modalArrowNext.click(function () {
		owlModalCarousel.trigger('next.owl.carousel');
	});
});





$(function () {

	let publicationsCarouselListInitiated = false;
	const prevArrow = $('#prev_arrow');
	const nextArrow = $('#next_arrow');
	const owlPublicationsCarouselList = $('#publicationsCarouselList');
	const $window = $(window);

	const initPublicationsCarouselList = () => {
		owlPublicationsCarouselList.owlCarousel({
			autoWidth: true,
			dots: false,
		});
		prevArrow.click(function () {
			owlPublicationsCarouselList.trigger('prev.owl.carousel');
		});
		nextArrow.click(function () {
			owlPublicationsCarouselList.trigger('next.owl.carousel');
		});
		owlPublicationsCarouselList.on('changed.owl.carousel', function (event) {
			const {item: {count, index}} = event;
			if (index === 0) {
				prevArrow.hide();
				$('.publicationsCarousel').removeClass('active');
			} else {
				prevArrow.show();
				$('.publicationsCarousel').addClass('active');
			}
		});
		publicationsCarouselListInitiated = true;
	};
	initPublicationsCarouselList();

// Remove function on mobile devices

	$window.resize(function () {
		if ($window.width() < 960) {
			if (publicationsCarouselListInitiated) {
				owlPublicationsCarouselList.trigger('destroy.owl.carousel');
				publicationsCarouselListInitiated = false;
			}
		} else {
			if (!publicationsCarouselListInitiated) {
				initPublicationsCarouselList();
			}
		}
	});

// Filter function
	let publicationsFilterLink = $(".publicationsFilter__link");
	publicationsFilterLink.click(function () {
		$(".publicationsFilter__link.publicationsFilter__link_active")
			.removeClass("publicationsFilter__link_active");
		$(this).addClass("publicationsFilter__link_active");

		const filter = $(this).data('filter'); // determines which tab is clicked
		owlPublicationsCarouselList.trigger('to.owl.carousel', [0, 0]);

		$(".owl-carousel .publicationsCarouselItem").each(function () {
			// if the picture data attribute 'data-filter' match to the tab attribute 'data-attr' with value 'all', then all pictures are shown
			if (filter === 'all' || $(this).data('attr') === filter) {
				$(this).show();
			} else {
				$(this).hide();
			}
		});
	});
});

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFib3V0LmpzIiwiaW5kZXguanMiLCJpbnRlcmlvci5qcyIsImludGVyaW9yR2FsbGVyeS5qcyIsIm1lbnUuanMiLCJuYXZiYXIuanMiLCJwb3J0Zm9saW8uanMiLCJwdWJsaWNhdGlvbnMuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ1BBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNsSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUN4QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNaQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQzNCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ2pDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNuTEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6Im1haW4ubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJChmdW5jdGlvbiAoKSB7XHJcblx0JChcIiNhcnJvd1wiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuXHRcdCQoXCIuaW5mb1NlY3Rpb25EZXNjcmlwdGlvblwiKS50b2dnbGVDbGFzcygnb3BlbkRlc2NyaXB0aW9uJyk7XHJcblx0XHQkKFwiLmluZm9TZWN0aW9uRGVzY3JpcHRpb25fX2Fycm93XCIpLnRvZ2dsZUNsYXNzKCdhcnJvd1VwJylcclxuXHR9KTtcclxufSk7XHJcblxyXG4iLCIkKGZ1bmN0aW9uICgpIHtcclxuXHQkKFwiI2hvbWVQYWdlU2xpZGVyTGlzdFwiKS5vd2xDYXJvdXNlbCh7XHJcblx0XHRpdGVtczogMSxcclxuXHRcdGxvb3A6IHRydWUsXHJcblx0XHRhdXRvcGxheTogdHJ1ZSxcclxuXHRcdGF1dG9wbGF5VGltZW91dDogMzAwMCxcclxuXHRcdGF1dG9wbGF5SG92ZXJQYXVzZTogdHJ1ZSxcclxuXHRcdGFuaW1hdGVPdXQ6ICdzbGlkZU91dFVwJyxcclxuXHRcdGFuaW1hdGVJbjogJ3NsaWRlSW5VcCcsXHJcblx0XHRtb3VzZURyYWc6IGZhbHNlLFxyXG5cdFx0dG91Y2hEcmFnOiBmYWxzZSxcclxuXHRcdHB1bGxEcmFnOiBmYWxzZSxcclxuXHRcdGZyZWVEcmFnOiBmYWxzZSxcclxuXHR9KTtcclxufSk7XHJcblxyXG4kKGZ1bmN0aW9uICgpIHtcclxuXHJcbi8vINCt0YLRgyDRhNGD0L3QutGG0LjRjiDQvdCw0LTQviDQutCw0Lot0YLQviDRgdCy0Y/Qt9Cw0YLRjCDRgSDQv9C10YDQtdC60LvRjtGH0LXQvdC40LXQvCDRj9C30YvQutC+0LIg0L3QsCDRgdCw0LnRgtC1LlxyXG4vLyBmdW5jdGlvbiB0cmFuc2xhdGVWYWxpZGF0aW9uTWVzc2FnZXMoY3VycmVudExhbmcpIHtcclxuLy8gXHRtZXNzYWdlID0ge1xyXG4vLyBcdFx0ZW46IHtcclxuLy8gXHRcdFx0cmVxdWlyZWQ6ICdSZXF1aXJlZCBmaWVsZCcsXHJcbi8vIFx0XHRcdG1pbmxlbmd0aDogJC52YWxpZGF0b3IuZm9ybWF0KCdQbGVhc2UgZW50ZXIgYXQgbGVhc3QgezB9IGNoYXJhY3RlcnMnKSxcclxuLy8gXHRcdFx0Y3VzdG9tUGhvbmU6ICdQbGVhc2UgZW50ZXIgY29ycmVjdCBwaG9uZScsXHJcbi8vIFx0XHR9LFxyXG4vLyBcdFx0dWs6IHtcclxuLy8gXHRcdFx0cmVxdWlyZWQ6ICfQn9C+0LvQtSDQvtCx0L7QslxcJ9GP0LfQutC+0LLQtSDQtNC70Y8g0LfQsNC/0L7QstC90LXQvdC90Y8nLFxyXG4vLyBcdFx0XHRtaW5sZW5ndGg6ICQudmFsaWRhdG9yLmZvcm1hdCgn0JHRg9C00Ywg0LvQsNGB0LrQsCwg0LLQstC10LTRltGC0Ywg0L3QtSDQvNC10L3RiNC1IHswfSDRgdC40LzQstC+0LvRltCyJyksXHJcbi8vIFx0XHRcdGN1c3RvbVBob25lOiAn0JHRg9C00Ywg0LvQsNGB0LrQsCwg0LLQstC10LTRltGC0Ywg0LrQvtGA0LXQutGC0L3QuNC5INC90L7QvNC10YAg0YLQtdC70LXRhNC+0L3RgycsXHJcbi8vIFx0XHR9LFxyXG4vLyBcdFx0cnU6IHtcclxuLy8gXHRcdFx0cmVxdWlyZWQ6ICfQn9C+0LvQtSDQvtCx0Y/Qt9Cw0YLQtdC70YzQvdC+INC00LvRjyDQt9Cw0L/QvtC70L3QtdC90LjRjycsXHJcbi8vIFx0XHRcdG1pbmxlbmd0aDogJC52YWxpZGF0b3IuZm9ybWF0KCfQn9C+0LbQsNC70YPQudGB0YLQsCwg0LLQstC10LTQuNGC0LUg0L3QtSDQvNC10L3QtdC1IHswfSDRgdC40LzQstC+0LvQvtCyJyksXHJcbi8vIFx0XHRcdGN1c3RvbVBob25lOiAn0J/QvtC20LDQu9GD0LnRgdGC0LAsINCy0LLQtdC00LjRgtC1INC60L7RgNGA0LXQutGC0L3Ri9C5INC90L7QvNC10YAg0YLQtdC70LXRhNC+0L3QsCcsXHJcbi8vIFx0XHR9XHJcbi8vIFx0fTtcclxuLy8gXHRjb25zb2xlLmxvZygnVHJhbnNsYXRpbmcgdmFsaWRhdGlvbiBtZXNzYWdlcyB0bzogJyArIGN1cnJlbnRMYW5nKTtcclxuLy9cclxuLy8gXHRpZiAoY3VycmVudExhbmcgPT0gJ3VrJykge1xyXG4vLyBcdFx0JC5leHRlbmQoJC52YWxpZGF0b3IubWVzc2FnZXMsIG1lc3NhZ2UudWspO1xyXG4vLyBcdH0gZWxzZSBpZiAoY3VycmVudExhbmcgPT0gJ3J1Jykge1xyXG4vLyBcdFx0JC5leHRlbmQoJC52YWxpZGF0b3IubWVzc2FnZXMsIG1lc3NhZ2UucnUpO1xyXG4vLyBcdH0gZWxzZSB7XHJcbi8vIFx0XHQkLmV4dGVuZCgkLnZhbGlkYXRvci5tZXNzYWdlcywgbWVzc2FnZS5lbik7XHJcbi8vIFx0fVxyXG4vLyB9XHJcblxyXG5cdCQudmFsaWRhdG9yLnNldERlZmF1bHRzKHtcclxuXHRcdHN1Ym1pdEhhbmRsZXI6IGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0JCgnLmJyaWVmX19ib3gnKVxyXG5cdFx0XHRcdC5jc3MoeydkaXNwbGF5JzogJ25vbmUnfSk7XHJcblx0XHRcdCQoJy5icmllZlNlbnQnKVxyXG5cdFx0XHRcdC5jc3MoeydkaXNwbGF5JzogJ2Jsb2NrJ30pO1xyXG5cdFx0fSxcclxuXHRcdGhpZ2hsaWdodDogZnVuY3Rpb24gKGVsZW1lbnQpIHtcclxuXHRcdFx0JChlbGVtZW50KVxyXG5cdFx0XHRcdC5jbG9zZXN0KCcuYnJpZWZGb3JtX19pbnB1dCcpXHJcblx0XHRcdFx0LmFkZENsYXNzKCdlcnJvckJvcmRlcicpO1xyXG5cdFx0fSxcclxuXHRcdHVuaGlnaGxpZ2h0OiBmdW5jdGlvbiAoZWxlbWVudCkge1xyXG5cdFx0XHQkKGVsZW1lbnQpXHJcblx0XHRcdFx0LmNsb3Nlc3QoJy5icmllZkZvcm1fX2lucHV0JylcclxuXHRcdFx0XHQucmVtb3ZlQ2xhc3MoJ2Vycm9yQm9yZGVyJyk7XHJcblx0XHR9XHJcblx0fSk7XHJcblxyXG5cdCQudmFsaWRhdG9yLmFkZE1ldGhvZChcImN1c3RvbUVtYWlsXCIsIGZ1bmN0aW9uICh2YWx1ZSwgZWxlbWVudCkge1xyXG5cdFx0cmV0dXJuIHRoaXMub3B0aW9uYWwoZWxlbWVudCkgfHwgL15bQS1aMC05Ll8lKy1dK0BbQS1aMC05Li1dK1xcLltBLVpdezIsNH0kL2kudGVzdCh2YWx1ZSk7XHJcblx0fSwgJ9Cf0L7QttCw0LvRg9C50YHRgtCwLCDQstCy0LXQtNC40YLQtSDQutC+0YDRgNC10LrRgtC90YvQuSDQsNC00YDQtdGBINGN0LvQtdC60YLRgNC+0L3QvdC+0Lkg0L/QvtGH0YLRiycpO1xyXG5cclxuXHQkLnZhbGlkYXRvci5hZGRNZXRob2QoXCJjdXN0b21QaG9uZVwiLCBmdW5jdGlvbiAodmFsdWUsIGVsZW1lbnQpIHtcclxuXHRcdGNvbnNvbGUubG9nKHZhbHVlKTtcclxuXHRcdHZhbHVlID0gdmFsdWUucmVwbGFjZSgvXFxzKy9nLCBcIlwiKTtcclxuXHRcdHJldHVybiB0aGlzLm9wdGlvbmFsKGVsZW1lbnQpIHx8IC9eKD8hXFwrLipcXCguKlxcKS4qXFwtXFwtLiokKSg/IVxcKy4qXFwoLipcXCkuKlxcLSQpKChbMC05XXswLDExfSk/KCBbMC05XXszfSk/KCBbMC05XXszfSk/KCBbMC05XXsyfSk/KCBbMC05XXsyfSk/KFxcKFswLTldezN9KT8oXFwpWzAtOV17M30pPyhbLV17MCwxfSk/KFswLTldezAsMn0pPyhbLV17MCwxfSk/KFswLTldezAsMn0pPyggWzAtOV17Mn0pPyggWzAtOV17Mn0pPyhcXCtbMC05XXsxLDExfSk/KCBbMC05XXszfSk/KCBbMC05XXszfSk/KCBbMC05XXsyfSk/KCBbMC05XXsyfSk/KFxcKFswLTldezN9KT8oXFwpWzAtOV17M30pPyhbLV17MCwxfSk/KFswLTldezAsMn0pPyhbLV17MCwxfSk/KFswLTldezAsMn0pPyggWzAtOV17Mn0pPyggWzAtOV17Mn0pPykkL2dpbS50ZXN0KHZhbHVlKTtcclxuXHR9LCAn0J/QvtC20LDQu9GD0LnRgdGC0LAsINCy0LLQtdC00LjRgtC1INC60L7RgNGA0LXQutGC0L3Ri9C5INC90L7QvNC10YAg0YLQtdC70LXRhNC+0L3QsCcpO1xyXG5cclxuXHQkKCcjYnJpZWZGb3JtJykudmFsaWRhdGUoe1xyXG5cdFx0cnVsZXM6IHtcclxuXHRcdFx0bmFtZToge1xyXG5cdFx0XHRcdHJlcXVpcmVkOiB0cnVlLFxyXG5cdFx0XHRcdG1pbmxlbmd0aDogMixcclxuXHRcdFx0fSxcclxuXHRcdFx0cGhvbmU6IHtcclxuXHRcdFx0XHRyZXF1aXJlZDogdHJ1ZSxcclxuXHRcdFx0XHRjdXN0b21QaG9uZTogdHJ1ZSxcclxuXHRcdFx0XHRtaW5sZW5ndGg6IDEwLFxyXG5cdFx0XHR9LFxyXG5cdFx0XHRlbWFpbDoge1xyXG5cdFx0XHRcdHJlcXVpcmVkOiB0cnVlLFxyXG5cdFx0XHRcdGVtYWlsOiB0cnVlLFxyXG5cdFx0XHRcdGN1c3RvbUVtYWlsOiB0cnVlLFxyXG5cdFx0XHR9LFxyXG5cdFx0XHRwcm9kdWN0OiB7XHJcblx0XHRcdFx0cmVxdWlyZWQ6IHRydWUsXHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblx0XHRtZXNzYWdlczoge1xyXG5cdFx0XHRuYW1lOiB7XHJcblx0XHRcdFx0cmVxdWlyZWQ6ICfQn9C+0LvQtSDQvtCx0Y/Qt9Cw0YLQtdC70YzQvdC+INC00LvRjyDQt9Cw0L/QvtC70L3QtdC90LjRjycsXHJcblx0XHRcdFx0bWlubGVuZ3RoOiAkLnZhbGlkYXRvci5mb3JtYXQoJ9Cf0L7QttCw0LvRg9C50YHRgtCwLCDQstCy0LXQtNC40YLQtSDQvdC1INC80LXQvdC10LUgezB9INGB0LjQvNCy0L7Qu9C+0LInKSxcclxuXHRcdFx0fSxcclxuXHRcdFx0cGhvbmU6IHtcclxuXHRcdFx0XHRyZXF1aXJlZDogJ9Cf0L7Qu9C1INC+0LHRj9C30LDRgtC10LvRjNC90L4g0LTQu9GPINC30LDQv9C+0LvQvdC10L3QuNGPJyxcclxuXHRcdFx0XHRjdXN0b21QaG9uZTogJ9Cf0L7QttCw0LvRg9C50YHRgtCwLCDQstCy0LXQtNC40YLQtSDQutC+0YDRgNC10LrRgtC90YvQuSDQvdC+0LzQtdGAINGC0LXQu9C10YTQvtC90LAnLFxyXG5cdFx0XHRcdG1pbmxlbmd0aDogJC52YWxpZGF0b3IuZm9ybWF0KCfQn9C+0LbQsNC70YPQudGB0YLQsCwg0LLQstC10LTQuNGC0LUg0L3QtSDQvNC10L3QtdC1IHswfSDRgdC40LzQstC+0LvQvtCyJyksXHJcblx0XHRcdH0sXHJcblx0XHRcdGVtYWlsOiB7XHJcblx0XHRcdFx0cmVxdWlyZWQ6ICfQn9C+0LvQtSDQvtCx0Y/Qt9Cw0YLQtdC70YzQvdC+INC00LvRjyDQt9Cw0L/QvtC70L3QtdC90LjRjycsXHJcblx0XHRcdFx0ZW1haWw6ICfQn9C+0LbQsNC70YPQudGB0YLQsCwg0LLQstC10LTQuNGC0LUg0LrQvtGA0YDQtdC60YLQvdGL0Lkg0LDQtNGA0LXRgSDRjdC70LXQutGC0YDQvtC90L3QvtC5INC/0L7Rh9GC0YsnLFxyXG5cdFx0XHRcdGN1c3RvbUVtYWlsOiAn0J/QvtC20LDQu9GD0LnRgdGC0LAsINCy0LLQtdC00LjRgtC1INC60L7RgNGA0LXQutGC0L3Ri9C5INCw0LTRgNC10YEg0Y3Qu9C10LrRgtGA0L7QvdC90L7QuSDQv9C+0YfRgtGLJ1xyXG5cdFx0XHR9LFxyXG5cdFx0XHRwcm9kdWN0OiB7XHJcblx0XHRcdFx0cmVxdWlyZWQ6ICfQn9C+0LvQtSDQvtCx0Y/Qt9Cw0YLQtdC70YzQvdC+INC00LvRjyDQt9Cw0L/QvtC70L3QtdC90LjRjycsXHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblx0XHRlcnJvckNsYXNzOiAnZXJyb3JNZXNzYWdlJyxcclxuXHR9KTtcclxufSk7XHJcblxyXG4kKGZ1bmN0aW9uICgpIHtcclxuXHQvLyBGdW5jdGlvbiBmb3IgYnJpZWYgcG9wLXVwXHJcblxyXG5cdCQoXCIubmF2YmFyTWVudV9fYnRuXCIpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuXHRcdCQoXCIuYnJpZWZcIikuY3NzKHtcImRpc3BsYXlcIjogXCJibG9ja1wifSk7XHJcblx0fSk7XHJcblxyXG5cdCQoXCIuYnJpZWZfX2Nyb3NzQnV0dG9uXCIpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuXHRcdCQoXCIuYnJpZWZcIikuY3NzKHtcImRpc3BsYXlcIjogXCJub25lXCJ9KTtcclxuXHR9KTtcclxufSk7IiwiJChmdW5jdGlvbiAoKSB7XHJcblxyXG5cdGxldCAkZ3JpZCA9ICQoJy5pbnRlcmlvcl9fbWFzb25yeScpLmltYWdlc0xvYWRlZChmdW5jdGlvbiAoKSB7XHJcblx0XHQvLyBpbml0IE1hc29ucnkgYWZ0ZXIgYWxsIGltYWdlcyBoYXZlIGxvYWRlZFxyXG5cdFx0JGdyaWQubWFzb25yeSh7XHJcblx0XHRcdC8vIG9wdGlvbnNcclxuXHRcdFx0aXRlbVNlbGVjdG9yOiAnLmludGVyaW9yX19pdGVtJyxcclxuXHRcdFx0Y29sdW1uV2lkdGg6ICcuZ3JpZC1zaXplcicsXHJcblx0XHRcdGd1dHRlcjogJy5ndXR0ZXItc2l6ZXIgJyxcclxuXHRcdFx0cGVyY2VudFBvc2l0aW9uOiB0cnVlLFxyXG5cdFx0XHRob3Jpem9udGFsT3JkZXI6IHRydWUsXHJcblx0XHRcdGlzUmVzaXplQm91bmQ6IHRydWVcclxuXHRcdH0pO1xyXG5cdH0pO1xyXG5cclxuXHRsZXQgaW50ZXJpb3JCdXR0b24gPSAkKFwiLmludGVyaW9yX19idG5cIik7XHJcblx0bGV0IGJ1YmJsZXNBbmltYXRpb24gPSAkKFwiLmludGVyaW9yX19idWJibGVzXCIpO1xyXG5cclxuXHRpbnRlcmlvckJ1dHRvbi5jbGljayhmdW5jdGlvbiAoKSB7XHJcblx0XHRidWJibGVzQW5pbWF0aW9uLmNzcyhcImRpc3BsYXlcIiwgXCJmbGV4XCIpOyAvLyBhbmltYXRpb24gc2hvd2luZ1xyXG5cdFx0c2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcblx0XHRcdGJ1YmJsZXNBbmltYXRpb24uZmFkZU91dCgzMDApOyAvLyBhbmltYXRpb24gaGlkaW5nIGFmdGVyIDJzIGFuZCB3aXRoIHRoZSBkZWxheSAtIDMwMG1zXHJcblx0XHR9LCAyMDAwKTtcclxuXHR9KTtcclxufSk7IiwiJChmdW5jdGlvbiAoKSB7XHJcblx0bGV0ICRncmlkR2FsbGVyeSA9ICQoJy5pbnRlcmlvckdhbGxlcnlfX21hc29ucnknKS5pbWFnZXNMb2FkZWQoZnVuY3Rpb24gKCkge1xyXG5cdFx0Ly8gaW5pdCBNYXNvbnJ5IGFmdGVyIGFsbCBpbWFnZXMgaGF2ZSBsb2FkZWRcclxuXHRcdCRncmlkR2FsbGVyeS5tYXNvbnJ5KHtcclxuXHRcdFx0Ly8gb3B0aW9uc1xyXG5cdFx0XHRpdGVtU2VsZWN0b3I6ICcuaW50ZXJpb3JHYWxsZXJ5X19pdGVtJyxcclxuXHRcdFx0Y29sdW1uV2lkdGg6ICcuZ3JpZC1zaXplcicsXHJcblx0XHRcdGd1dHRlcjogJy5ndXR0ZXItc2l6ZXIgJyxcclxuXHRcdFx0cGVyY2VudFBvc2l0aW9uOiB0cnVlLFxyXG5cdFx0XHRob3Jpem9udGFsT3JkZXI6IHRydWVcclxuXHRcdH0pO1xyXG5cdH0pO1xyXG59KTsiLCIkKGZ1bmN0aW9uICgpIHtcclxuXHJcblx0JCgnI25hdmJhckJ1cmdlcicpLmNsaWNrKGZ1bmN0aW9uIChlKSB7XHJcblx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cdFx0JCh0aGlzKS50b2dnbGVDbGFzcygnb3BlbicpO1xyXG5cdFx0JCgnLm5hdmJhck1lbnUnKS50b2dnbGVDbGFzcygnbmF2YmFyTWVudV9vcGVuJyk7XHJcblx0fSk7XHJcblxyXG5cclxuXHRsZXQgbmF2YmFyTmF2TGluayA9ICQoXCIubmF2YmFyTmF2X19saW5rXCIpO1xyXG5cdG5hdmJhck5hdkxpbmsuY2xpY2soZnVuY3Rpb24gKCkge1xyXG5cdFx0JChcIi5uYXZiYXJOYXZfX2xpbmsubmF2YmFyTmF2X19saW5rX2FjdGl2ZVwiKS5yZW1vdmVDbGFzcyhcIm5hdmJhck5hdl9fbGlua19hY3RpdmVcIik7XHJcblx0XHQkKHRoaXMpLmFkZENsYXNzKFwibmF2YmFyTmF2X19saW5rX2FjdGl2ZVwiKTtcclxuXHR9KTtcclxuXHJcblxyXG5cdGxldCBuYXZiYXJMYW5ndWFnZUxpbmsgPSAkKFwiLm5hdmJhckxhbmd1YWdlX19saW5rXCIpO1xyXG5cdG5hdmJhckxhbmd1YWdlTGluay5jbGljayhmdW5jdGlvbiAoKSB7XHJcblx0XHQkKFwiLm5hdmJhckxhbmd1YWdlX19saW5rLm5hdmJhckxhbmd1YWdlX19saW5rX2FjdGl2ZVwiKS5yZW1vdmVDbGFzcyhcIm5hdmJhckxhbmd1YWdlX19saW5rX2FjdGl2ZVwiKTtcclxuXHRcdCQodGhpcykuYWRkQ2xhc3MoXCJuYXZiYXJMYW5ndWFnZV9fbGlua19hY3RpdmVcIik7XHJcblx0fSk7XHJcbn0pO1xyXG5cclxuXHJcbi8vICQoXCIjbGFuZ1wiKS5jaGFuZ2UoZnVuY3Rpb24oKSB7XHJcbi8vICAgICB0cmFuc2xhdGVWYWxpZGF0aW9uTWVzc2FnZXModGhpcy52YWx1ZSk7XHJcbi8vICAgICBjb25zb2xlLmxvZyhcIlNldHRpbmcgbGFuZ3VhZ2UgdG8gXCIgKyB0aGlzLnZhbHVlKTtcclxuLy8gfSk7IiwiJChmdW5jdGlvbiAoKSB7XHJcblxyXG4vLyBGdW5jdGlvbiBmb3IgcG9ydGZvbGlvIHN1Ym1lbnUgZGVtb25zdHJhdGlvblxyXG5cclxuXHQkKCcjcG9ydGZvbGlvSXRlbScpLmNsaWNrKGZ1bmN0aW9uIChldmVudCkge1xyXG5cdFx0ZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblx0XHQkKCcubmF2YmFyTmF2U3ViTWVudScpLnRvZ2dsZUNsYXNzKCdvcGVuJyk7XHJcblx0XHQkKFwiLm5hdmJhck5hdl9fYXJyb3dcIikudG9nZ2xlQ2xhc3MoJ2Fycm93VXAnKTtcclxuXHRcdCQoJy5uYXZiYXJMYW5ndWFnZURlc2t0b3BTdWJNZW51JykucmVtb3ZlQ2xhc3MoXCJvcGVuXCIpO1xyXG5cdH0pO1xyXG5cclxuXHQkKCdodG1sJykuY2xpY2soZnVuY3Rpb24gKCkge1xyXG5cdFx0JCgnLm5hdmJhck5hdlN1Yk1lbnUnKS5yZW1vdmVDbGFzcyhcIm9wZW5cIik7XHJcblx0XHQkKFwiLm5hdmJhck5hdl9fYXJyb3dcIikucmVtb3ZlQ2xhc3MoJ2Fycm93VXAnKTtcclxuXHR9KTtcclxuXHJcblxyXG4vLyBGdW5jdGlvbiBmb3IgbGFuZ3VhZ2Ugc3VibWVudSBkZW1vbnN0cmF0aW9uXHJcblxyXG5cdCQoJyNuYXZiYXJMYW5ndWFnZURlc2t0b3BMaW5rJykuY2xpY2soZnVuY3Rpb24gKGV2ZW50KSB7XHJcblx0XHRldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHRcdCQoJy5uYXZiYXJMYW5ndWFnZURlc2t0b3BTdWJNZW51JykudG9nZ2xlQ2xhc3MoJ29wZW4nKTtcclxuXHRcdCQoXCIubmF2YmFyTGFuZ3VhZ2VEZXNrdG9wX19hcnJvd1wiKS50b2dnbGVDbGFzcygndXBBcnJvdycpO1xyXG5cdFx0JCgnLm5hdmJhck5hdlN1Yk1lbnUnKS5yZW1vdmVDbGFzcyhcIm9wZW5cIik7XHJcblx0fSk7XHJcblxyXG5cdCQoJ2h0bWwnKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcblx0XHQkKCcubmF2YmFyTGFuZ3VhZ2VEZXNrdG9wU3ViTWVudScpLnJlbW92ZUNsYXNzKFwib3BlblwiKTtcclxuXHRcdCQoXCIubmF2YmFyTGFuZ3VhZ2VEZXNrdG9wX19hcnJvd1wiKS5yZW1vdmVDbGFzcygndXBBcnJvdycpO1xyXG5cdH0pO1xyXG59KTtcclxuXHJcblxyXG4iLCIkKGZ1bmN0aW9uICgpIHtcclxuXHJcbi8vIHBvcnRmb2xpb0Jsb2NrSW1hZ2UgY2Fyb3VzZWwgaW5pdGlhdGlvblxyXG5cdGxldCBjYXJvdXNlbExpc3RJbWFnZUluaXRpYXRlZCA9IGZhbHNlO1xyXG5cdGNvbnN0IHByZXZBcnJvdyA9ICQoJyNwcmV2aW91c19hcnJvdycpO1xyXG5cdGNvbnN0IG5leHRBcnJvdyA9ICQoJyNuZXh0X2Fycm93Jyk7XHJcblx0Y29uc3Qgb3dsQ2Fyb3VzZWxMaXN0SW1hZ2UgPSAkKCcjY2Fyb3VzZWxMaXN0SW1hZ2UnKTtcclxuXHRjb25zdCAkd2luZG93ID0gJCh3aW5kb3cpO1xyXG5cclxuXHRjb25zdCBpbml0Q2Fyb3VzZWxMaXN0SW1hZ2UgPSAoKSA9PiB7XHJcblx0XHRvd2xDYXJvdXNlbExpc3RJbWFnZS5vd2xDYXJvdXNlbCh7XHJcblx0XHRcdGF1dG9XaWR0aDogdHJ1ZSxcclxuXHRcdFx0bG9vcDogdHJ1ZSxcclxuXHRcdFx0ZG90czogZmFsc2UsXHJcblx0XHRcdHJlc3BvbnNpdmVDbGFzczogdHJ1ZSxcclxuXHRcdFx0cmVzcG9uc2l2ZToge1xyXG5cdFx0XHRcdDA6IHtcclxuXHRcdFx0XHRcdGxvb3A6IGZhbHNlLFxyXG5cdFx0XHRcdH0sXHJcblx0XHRcdFx0OTYwOiB7XHJcblx0XHRcdFx0XHRsb29wOiB0cnVlLFxyXG5cdFx0XHRcdH0sXHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdFx0cHJldkFycm93LmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0b3dsQ2Fyb3VzZWxMaXN0SW1hZ2UudHJpZ2dlcigncHJldi5vd2wuY2Fyb3VzZWwnKTtcclxuXHRcdH0pO1xyXG5cdFx0bmV4dEFycm93LmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0b3dsQ2Fyb3VzZWxMaXN0SW1hZ2UudHJpZ2dlcignbmV4dC5vd2wuY2Fyb3VzZWwnKTtcclxuXHRcdH0pO1xyXG5cdFx0b3dsQ2Fyb3VzZWxMaXN0SW1hZ2Uub24oJ2NoYW5nZWQub3dsLmNhcm91c2VsJywgZnVuY3Rpb24gKGV2ZW50KSB7XHJcblx0XHRcdGNvbnN0IHtpdGVtOiB7Y291bnQsIGluZGV4fX0gPSBldmVudDtcclxuXHRcdFx0aWYgKGluZGV4ID09PSAwKSB7XHJcblx0XHRcdFx0cHJldkFycm93LmhpZGUoKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRwcmV2QXJyb3cuc2hvdygpO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHRcdGNhcm91c2VsTGlzdEltYWdlSW5pdGlhdGVkID0gdHJ1ZTtcclxuXHR9O1xyXG5cdGluaXRDYXJvdXNlbExpc3RJbWFnZSgpO1xyXG5cclxuLy8gUmVtb3ZlIHBvcnRmb2xpb0Jsb2NrSW1hZ2UgY2Fyb3VzZWwgb24gbW9iaWxlIGRldmljZXNcclxuXHJcblx0JHdpbmRvdy5yZXNpemUoZnVuY3Rpb24gKCkge1xyXG5cdFx0aWYgKCR3aW5kb3cud2lkdGgoKSA8IDk2MCkge1xyXG5cdFx0XHRpZiAoY2Fyb3VzZWxMaXN0SW1hZ2VJbml0aWF0ZWQpIHtcclxuXHRcdFx0XHRvd2xDYXJvdXNlbExpc3RJbWFnZS50cmlnZ2VyKCdkZXN0cm95Lm93bC5jYXJvdXNlbCcpO1xyXG5cdFx0XHRcdGNhcm91c2VsTGlzdEltYWdlSW5pdGlhdGVkID0gZmFsc2U7XHJcblx0XHRcdH1cclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGlmICghY2Fyb3VzZWxMaXN0SW1hZ2VJbml0aWF0ZWQpIHtcclxuXHRcdFx0XHRpbml0Q2Fyb3VzZWxMaXN0SW1hZ2UoKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH0pO1xyXG5cclxuXHJcbi8vIHBvcnRmb2xpb0Jsb2NrQ2F0YWxvZ3VlIGNhcm91c2VsIGluaXRpYXRpb25cclxuXHRsZXQgY2Fyb3VzZWxMaXN0Q2F0YWxvZ3VlSW5pdGlhdGVkID0gZmFsc2U7XHJcblx0Y29uc3QgcHJldkFycm93MiA9ICQoJyNsZWZ0X2Fycm93Jyk7XHJcblx0Y29uc3QgbmV4dEFycm93MiA9ICQoJyNyaWdodF9hcnJvdycpO1xyXG5cdGNvbnN0IG93bENhcm91c2VsTGlzdENhdGFsb2d1ZSA9ICQoJyNjYXJvdXNlbExpc3RDYXRhbG9ndWUnKTtcclxuXHJcblx0Y29uc3QgaW5pdENhcm91c2VsTGlzdENhdGFsb2d1ZSA9ICgpID0+IHtcclxuXHRcdG93bENhcm91c2VsTGlzdENhdGFsb2d1ZS5vd2xDYXJvdXNlbCh7XHJcblx0XHRcdGF1dG9XaWR0aDogdHJ1ZSxcclxuXHRcdFx0bG9vcDogdHJ1ZSxcclxuXHRcdFx0ZG90czogZmFsc2UsXHJcblx0XHRcdHJlc3BvbnNpdmVDbGFzczogdHJ1ZSxcclxuXHRcdFx0cmVzcG9uc2l2ZToge1xyXG5cdFx0XHRcdDA6IHtcclxuXHRcdFx0XHRcdGxvb3A6IGZhbHNlLFxyXG5cdFx0XHRcdH0sXHJcblx0XHRcdFx0OTYwOiB7XHJcblx0XHRcdFx0XHRsb29wOiB0cnVlLFxyXG5cdFx0XHRcdH0sXHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdFx0cHJldkFycm93Mi5jbGljayhmdW5jdGlvbiAoKSB7XHJcblx0XHRcdG93bENhcm91c2VsTGlzdENhdGFsb2d1ZS50cmlnZ2VyKCdwcmV2Lm93bC5jYXJvdXNlbCcpO1xyXG5cdFx0fSk7XHJcblx0XHRuZXh0QXJyb3cyLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0b3dsQ2Fyb3VzZWxMaXN0Q2F0YWxvZ3VlLnRyaWdnZXIoJ25leHQub3dsLmNhcm91c2VsJyk7XHJcblx0XHR9KTtcclxuXHRcdG93bENhcm91c2VsTGlzdENhdGFsb2d1ZS5vbignY2hhbmdlZC5vd2wuY2Fyb3VzZWwnLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuXHRcdFx0Y29uc3Qge2l0ZW06IHtjb3VudCwgaW5kZXh9fSA9IGV2ZW50O1xyXG5cdFx0XHRpZiAoaW5kZXggPT09IDApIHtcclxuXHRcdFx0XHRwcmV2QXJyb3cyLmhpZGUoKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRwcmV2QXJyb3cyLnNob3coKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0XHRjYXJvdXNlbExpc3RDYXRhbG9ndWVJbml0aWF0ZWQgPSB0cnVlO1xyXG5cdH07XHJcblx0aW5pdENhcm91c2VsTGlzdENhdGFsb2d1ZSgpO1xyXG5cclxuLy8gUmVtb3ZlIFBvcnRmb2xpb0Jsb2NrQ2F0YWxvZ3VlIG9uIG1vYmlsZSBkZXZpY2VzXHJcblxyXG5cdCR3aW5kb3cucmVzaXplKGZ1bmN0aW9uICgpIHtcclxuXHRcdGlmICgkd2luZG93LndpZHRoKCkgPCA5NjApIHtcclxuXHRcdFx0aWYgKGNhcm91c2VsTGlzdENhdGFsb2d1ZUluaXRpYXRlZCkge1xyXG5cdFx0XHRcdG93bENhcm91c2VsTGlzdENhdGFsb2d1ZS50cmlnZ2VyKCdkZXN0cm95Lm93bC5jYXJvdXNlbCcpO1xyXG5cdFx0XHRcdGNhcm91c2VsTGlzdENhdGFsb2d1ZUluaXRpYXRlZCA9IGZhbHNlO1xyXG5cdFx0XHR9XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRpZiAoIWNhcm91c2VsTGlzdENhdGFsb2d1ZUluaXRpYXRlZCkge1xyXG5cdFx0XHRcdGluaXRDYXJvdXNlbExpc3RDYXRhbG9ndWUoKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH0pO1xyXG5cclxuXHJcbi8vIEZ1bmN0aW9uIGZvciBtb2RhbCB3aW5kb3dcclxuXHJcblx0Y29uc3QgYWRkTGlzdGVuZXJzID0gZWxlbWVudCA9PiB7XHJcblx0XHRlbGVtZW50Lm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0JChcIi5tb2RhbFwiKS5jc3Moe1wiZGlzcGxheVwiOiBcImJsb2NrXCJ9KTtcclxuXHRcdFx0JC5hamF4KHtcclxuXHRcdFx0XHR0eXBlOiBcIkdFVFwiLFxyXG5cdFx0XHRcdHVybDogXCJodHRwOi8vcGhvdG8uYXBvbG9raG92LmluLnVhL2dldGltYWdlbWlneD9yZXNpZD1kYXRhLmlkXCIsXHJcblx0XHRcdFx0ZGF0YToge1xyXG5cdFx0XHRcdFx0aWQ6ICQodGhpcykuaWRcclxuXHRcdFx0XHR9LFxyXG5cdFx0XHRcdGVycm9yOiBmdW5jdGlvbiAoZGF0YSwgdGV4dFN0YXR1cykge1xyXG5cclxuXHRcdFx0XHR9LFxyXG5cdFx0XHRcdHN1Y2Nlc3M6IGZ1bmN0aW9uIChkYXRhLCB0ZXh0U3RhdHVzKSB7XHJcblxyXG5cdFx0XHRcdH0sXHJcblx0XHRcdFx0Y29tcGxldGU6IGZ1bmN0aW9uICgpIHtcclxuXHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cdH07XHJcblx0Y29uc3QgaW1nQm94ID0gJChcIi5jYXJvdXNlbEl0ZW1fX2ltZ0JveFwiKTtcclxuXHRhZGRMaXN0ZW5lcnMoaW1nQm94KTtcclxuXHJcblxyXG5cdCQoXCIubW9kYWxfX2Nyb3NzQmxvY2tcIikub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG5cdFx0JChcIi5tb2RhbFwiKS5jc3Moe1wiZGlzcGxheVwiOiBcIm5vbmVcIn0pO1xyXG5cdH0pO1xyXG5cclxuXHJcbi8vIEZ1bmN0aW9uIGZvciBtb2RhbENhcm91c2VsXHJcblxyXG5cdGNvbnN0IG1vZGFsQXJyb3dQcmV2aW91cyA9ICQoJyNtb2RhbEFycm93UHJldmlvdXMnKTtcclxuXHRjb25zdCBtb2RhbEFycm93TmV4dCA9ICQoJyNtb2RhbEFycm93TmV4dCcpO1xyXG5cdGNvbnN0IG93bE1vZGFsQ2Fyb3VzZWwgPSAkKCcjbW9kYWxDYXJvdXNlbExpc3QnKTtcclxuXHRvd2xNb2RhbENhcm91c2VsLm93bENhcm91c2VsKHtcclxuXHRcdGl0ZW1zOiAxLFxyXG5cdFx0bG9vcDogdHJ1ZSxcclxuXHRcdGRvdHM6IGZhbHNlLFxyXG5cdFx0bW91c2VEcmFnOiBmYWxzZSxcclxuXHRcdHRvdWNoRHJhZzogZmFsc2UsXHJcblx0XHRwdWxsRHJhZzogZmFsc2UsXHJcblx0XHRmcmVlRHJhZzogZmFsc2UsXHJcblx0XHRyZXNwb25zaXZlQ2xhc3M6IHRydWUsXHJcblx0XHRyZXNwb25zaXZlOiB7XHJcblx0XHRcdDA6IHtcclxuXHRcdFx0XHR0b3VjaERyYWc6IHRydWUsXHJcblx0XHRcdH0sXHJcblx0XHRcdDk2MDoge1xyXG5cdFx0XHRcdHRvdWNoRHJhZzogZmFsc2UsXHJcblx0XHRcdH0sXHJcblx0XHR9XHJcblx0fSk7XHJcblx0bW9kYWxBcnJvd1ByZXZpb3VzLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuXHRcdG93bE1vZGFsQ2Fyb3VzZWwudHJpZ2dlcigncHJldi5vd2wuY2Fyb3VzZWwnKTtcclxuXHR9KTtcclxuXHRtb2RhbEFycm93TmV4dC5jbGljayhmdW5jdGlvbiAoKSB7XHJcblx0XHRvd2xNb2RhbENhcm91c2VsLnRyaWdnZXIoJ25leHQub3dsLmNhcm91c2VsJyk7XHJcblx0fSk7XHJcbn0pO1xyXG5cclxuXHJcblxyXG5cclxuIiwiJChmdW5jdGlvbiAoKSB7XHJcblxyXG5cdGxldCBwdWJsaWNhdGlvbnNDYXJvdXNlbExpc3RJbml0aWF0ZWQgPSBmYWxzZTtcclxuXHRjb25zdCBwcmV2QXJyb3cgPSAkKCcjcHJldl9hcnJvdycpO1xyXG5cdGNvbnN0IG5leHRBcnJvdyA9ICQoJyNuZXh0X2Fycm93Jyk7XHJcblx0Y29uc3Qgb3dsUHVibGljYXRpb25zQ2Fyb3VzZWxMaXN0ID0gJCgnI3B1YmxpY2F0aW9uc0Nhcm91c2VsTGlzdCcpO1xyXG5cdGNvbnN0ICR3aW5kb3cgPSAkKHdpbmRvdyk7XHJcblxyXG5cdGNvbnN0IGluaXRQdWJsaWNhdGlvbnNDYXJvdXNlbExpc3QgPSAoKSA9PiB7XHJcblx0XHRvd2xQdWJsaWNhdGlvbnNDYXJvdXNlbExpc3Qub3dsQ2Fyb3VzZWwoe1xyXG5cdFx0XHRhdXRvV2lkdGg6IHRydWUsXHJcblx0XHRcdGRvdHM6IGZhbHNlLFxyXG5cdFx0fSk7XHJcblx0XHRwcmV2QXJyb3cuY2xpY2soZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRvd2xQdWJsaWNhdGlvbnNDYXJvdXNlbExpc3QudHJpZ2dlcigncHJldi5vd2wuY2Fyb3VzZWwnKTtcclxuXHRcdH0pO1xyXG5cdFx0bmV4dEFycm93LmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0b3dsUHVibGljYXRpb25zQ2Fyb3VzZWxMaXN0LnRyaWdnZXIoJ25leHQub3dsLmNhcm91c2VsJyk7XHJcblx0XHR9KTtcclxuXHRcdG93bFB1YmxpY2F0aW9uc0Nhcm91c2VsTGlzdC5vbignY2hhbmdlZC5vd2wuY2Fyb3VzZWwnLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuXHRcdFx0Y29uc3Qge2l0ZW06IHtjb3VudCwgaW5kZXh9fSA9IGV2ZW50O1xyXG5cdFx0XHRpZiAoaW5kZXggPT09IDApIHtcclxuXHRcdFx0XHRwcmV2QXJyb3cuaGlkZSgpO1xyXG5cdFx0XHRcdCQoJy5wdWJsaWNhdGlvbnNDYXJvdXNlbCcpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRwcmV2QXJyb3cuc2hvdygpO1xyXG5cdFx0XHRcdCQoJy5wdWJsaWNhdGlvbnNDYXJvdXNlbCcpLmFkZENsYXNzKCdhY3RpdmUnKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0XHRwdWJsaWNhdGlvbnNDYXJvdXNlbExpc3RJbml0aWF0ZWQgPSB0cnVlO1xyXG5cdH07XHJcblx0aW5pdFB1YmxpY2F0aW9uc0Nhcm91c2VsTGlzdCgpO1xyXG5cclxuLy8gUmVtb3ZlIGZ1bmN0aW9uIG9uIG1vYmlsZSBkZXZpY2VzXHJcblxyXG5cdCR3aW5kb3cucmVzaXplKGZ1bmN0aW9uICgpIHtcclxuXHRcdGlmICgkd2luZG93LndpZHRoKCkgPCA5NjApIHtcclxuXHRcdFx0aWYgKHB1YmxpY2F0aW9uc0Nhcm91c2VsTGlzdEluaXRpYXRlZCkge1xyXG5cdFx0XHRcdG93bFB1YmxpY2F0aW9uc0Nhcm91c2VsTGlzdC50cmlnZ2VyKCdkZXN0cm95Lm93bC5jYXJvdXNlbCcpO1xyXG5cdFx0XHRcdHB1YmxpY2F0aW9uc0Nhcm91c2VsTGlzdEluaXRpYXRlZCA9IGZhbHNlO1xyXG5cdFx0XHR9XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRpZiAoIXB1YmxpY2F0aW9uc0Nhcm91c2VsTGlzdEluaXRpYXRlZCkge1xyXG5cdFx0XHRcdGluaXRQdWJsaWNhdGlvbnNDYXJvdXNlbExpc3QoKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH0pO1xyXG5cclxuLy8gRmlsdGVyIGZ1bmN0aW9uXHJcblx0bGV0IHB1YmxpY2F0aW9uc0ZpbHRlckxpbmsgPSAkKFwiLnB1YmxpY2F0aW9uc0ZpbHRlcl9fbGlua1wiKTtcclxuXHRwdWJsaWNhdGlvbnNGaWx0ZXJMaW5rLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuXHRcdCQoXCIucHVibGljYXRpb25zRmlsdGVyX19saW5rLnB1YmxpY2F0aW9uc0ZpbHRlcl9fbGlua19hY3RpdmVcIilcclxuXHRcdFx0LnJlbW92ZUNsYXNzKFwicHVibGljYXRpb25zRmlsdGVyX19saW5rX2FjdGl2ZVwiKTtcclxuXHRcdCQodGhpcykuYWRkQ2xhc3MoXCJwdWJsaWNhdGlvbnNGaWx0ZXJfX2xpbmtfYWN0aXZlXCIpO1xyXG5cclxuXHRcdGNvbnN0IGZpbHRlciA9ICQodGhpcykuZGF0YSgnZmlsdGVyJyk7IC8vIGRldGVybWluZXMgd2hpY2ggdGFiIGlzIGNsaWNrZWRcclxuXHRcdG93bFB1YmxpY2F0aW9uc0Nhcm91c2VsTGlzdC50cmlnZ2VyKCd0by5vd2wuY2Fyb3VzZWwnLCBbMCwgMF0pO1xyXG5cclxuXHRcdCQoXCIub3dsLWNhcm91c2VsIC5wdWJsaWNhdGlvbnNDYXJvdXNlbEl0ZW1cIikuZWFjaChmdW5jdGlvbiAoKSB7XHJcblx0XHRcdC8vIGlmIHRoZSBwaWN0dXJlIGRhdGEgYXR0cmlidXRlICdkYXRhLWZpbHRlcicgbWF0Y2ggdG8gdGhlIHRhYiBhdHRyaWJ1dGUgJ2RhdGEtYXR0cicgd2l0aCB2YWx1ZSAnYWxsJywgdGhlbiBhbGwgcGljdHVyZXMgYXJlIHNob3duXHJcblx0XHRcdGlmIChmaWx0ZXIgPT09ICdhbGwnIHx8ICQodGhpcykuZGF0YSgnYXR0cicpID09PSBmaWx0ZXIpIHtcclxuXHRcdFx0XHQkKHRoaXMpLnNob3coKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHQkKHRoaXMpLmhpZGUoKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0fSk7XHJcbn0pO1xyXG4iXX0=
